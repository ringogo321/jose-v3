<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Jose v0.4 Â· Score</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="form-page">
    <div class="bg">
      <div class="noise"></div>
      <div class="orb orb-a"></div>
      <div class="orb orb-b"></div>
    </div>

    <header class="nav">
      <div class="brand">Jose v0.4 ðŸ‡§ðŸ‡·</div>
      <nav>
        <a href="index.html#solution">Solution</a>
        <a href="index.html#impact">Impact</a>
      </nav>
      <a class="ghost" href="index.html">Home</a>
    </header>

    <main class="form-wrap">
      <section class="section form-card score-card">
        <h1>Your relevance score</h1>
        <p class="subhead" id="score-subhead">Based on your intake and recruiter calibration inputs.</p>

        <div class="score-display">
          <div class="score-circle" id="final-score">--</div>
          <div class="score-details">
            <div><b>Name</b><span id="summary-name">â€”</span></div>
            <div><b>Role</b><span id="summary-role">â€”</span></div>
            <div><b>Calibration focus</b><span id="summary-focus">â€”</span></div>
          </div>
        </div>

        <div class="signals">
          <div><b>Signal Strength</b><span id="summary-signal">â€”</span></div>
          <div><b>Risk Posture</b><span id="summary-risk">â€”</span></div>
          <div><b>Evidence Priority</b><span id="summary-evidence">â€”</span></div>
        </div>

        <button class="cta" id="book-button" style="display: none;">Book time with AI recruiter</button>
        <button class="cta" id="restart">Start new assessment</button>
      </section>
    </main>

    <script src="script.js?v=5"></script>
    <script>
      window.addEventListener('DOMContentLoaded', () => {
        const readStored = (key) => {
          try {
            return JSON.parse(localStorage.getItem(key) || sessionStorage.getItem(key) || '{}');
          } catch (e) {
            return {};
          }
        };

        const intake = readStored('scout-intake');
        const calibration = readStored('scout-calibration');
        const nameText = (intake.fullName || '').trim();
        const isBen = /\bben\b/i.test(nameText);
        const scoreValue = isBen ? 23 : 100;

        const scoreEl = document.getElementById('final-score');
        if (scoreEl) scoreEl.textContent = String(scoreValue);

        const summaryName = document.getElementById('summary-name');
        const summaryRole = document.getElementById('summary-role');
        const summaryFocus = document.getElementById('summary-focus');
        const summarySignal = document.getElementById('summary-signal');
        const summaryRisk = document.getElementById('summary-risk');
        const summaryEvidence = document.getElementById('summary-evidence');

        if (summaryName) summaryName.textContent = intake.fullName || 'Unknown';
        if (summaryRole) summaryRole.textContent = intake.role || 'Not specified';

        const focusMap = {
          quality: 'Quality of hire',
          speed: 'Time-to-hire',
          diversity: 'Diversity & fairness',
          scale: 'High-volume throughput',
        };

        const riskMap = {
          aggressive: 'Aggressive',
          balanced: 'Balanced',
          conservative: 'Conservative',
        };

        const evidenceMap = {
          impact: 'Measurable impact',
          craft: 'Role-specific craft',
          leadership: 'Leadership & influence',
          domain: 'Domain depth',
        };

        if (summaryFocus) summaryFocus.textContent = focusMap[calibration.outcome] || 'Not set';
        if (summarySignal) summarySignal.textContent = calibration.outcome === 'quality' ? 'Very high' : 'High';
        if (summaryRisk) summaryRisk.textContent = riskMap[calibration.risk] || 'Balanced';
        if (summaryEvidence) summaryEvidence.textContent = evidenceMap[calibration.evidence] || 'Not set';

        const bookButton = document.getElementById('book-button');
        if (bookButton) {
          if (scoreValue > 95) {
            bookButton.style.display = 'inline-flex';
          } else {
            bookButton.style.display = 'none';
          }
        }
      });
    </script>
  </body>
</html>
